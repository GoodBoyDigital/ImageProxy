<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
        
        <script src="ImageProxy.js"></script>
    </head>
    <body>
        <script>
        	
        	var frameURL = "http://matgroves.com/imageproxy/ImageProxyFrame.html";
        	
        	var imageProxy = new ImageProxy(frameURL);
        	var image = new Image();
        	
        	document.body.appendChild(image);
        	
        	image.onload = function()
        	{
        		var canvas = document.createElement('canvas');
  				var context = canvas.getContext('2d');
 				canvas.width = this.width;
  				canvas.height = this.height;
  
				context.drawImage(this, 0,0);
				
				var imageData = context.getImageData(0,0, canvas.width,canvas.height);
				
				var d = imageData.data;
				
				for (var i=0; i < d.length; i+=4) 
				{
					var r = d[i];
				    var g = d[i+1];
				    var b = d[i+2];
				    
				    d[i] = g;
				    d[i+1] = b;
				    d[i+2] = r;
				}
				
				context.putImageData(imageData, 0, 0);
				
				document.body.appendChild(canvas);
        	}
        	
        	imageProxy.setImageSrc(image, "http://matgroves.com/imageproxy/testImage.png");
        	
        </script>
        
       	
    </body>
</html>
